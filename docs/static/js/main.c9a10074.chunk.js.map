{"version":3,"sources":["firebase.js","firebase.config.js","firestoreHandler.js","pages/Home.js","components/MainLayout.js","components/Diary.js","components/Selfie.js","components/Photo.js","components/Schedule.js","components/DayDialog.js","components/Calendar.js","pages/MyCalendar.js","pages/FriendCalendar.js","App.js","serviceWorker.js","index.js"],"names":["firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","uid","email","name","a","async","collection","where","get","empty","add","result","docs","map","element","data","id","follower","following","date","start","Date","getFullYear","getMonth","end","content","docId","doc","delete","done","update","file","face","ref","storage","task","child","put","contentType","type","snapshot","getDownloadURL","url","imageName","imageUrl","then","fileRef","Home","props","className","Fade","in","user","Button","outline","color","onClick","provider","auth","GoogleAuthProvider","signInWithPopup","src","alt","displayName","to","firestoreHandler","signOut","Layout","useState","open","setOpen","showAddFriendModal","setShowAddFriendModal","searchEmail","setSearchEmail","searchedUser","setSearchedUser","followingList","setFollowingList","fetchFollowingList","closeDrawer","searchByEmail","followExist","find","useEffect","Modal","isOpen","toggle","ModalHeader","ModalBody","InputGroup","Input","value","onChange","e","target","placeholder","onKeyPress","charCode","InputGroupAddon","addonType","Card","body","CardText","disabled","AppBar","position","Toolbar","variant","IconButton","edge","aria-label","Typography","title","Drawer","anchor","ListItem","button","component","Link","ListItemText","primary","Divider","List","selected","window","location","pathname","size","split","key","Diary","host","mine","React","recorder","setRecorder","diaryData","setDiaryData","text","setText","status","setStatus","show","setShow","fetchDiaryData","stt","blob","fetch","method","headers","response","json","addDiary","shiftKey","preventDefault","navigator","getUserMedia","audio","stream","tempRecorder","RecordRTC","startRecording","error","console","log","stopRecording","getBlob","Selfie","selfieData","setSelfieData","uploading","setUploading","fetchSelfieData","formData","FormData","files","append","process","info","faceCount","faces","emotion","htmlFor","Spinner","Photo","photoDatas","setPhotoDatas","fetchPhotoDatas","length","multiple","photoData","imageStyle","height","width","backgroundImage","backgroundRepeat","backgroundSize","backgroundPosition","style","Schedule","schedule","setSchedule","scheduleList","setScheduleList","fetchSchedule","addSchedule","event","keyCode","trim","check","Checkbox","checked","inputProps","DayDialog","activeTab","setActiveTab","tab","Dialog","onClose","getDate","Nav","tabs","NavItem","NavLink","TabContent","TabPane","tabId","formatDate","d","month","day","year","join","Calendar","showDayDialog","setShowDayDialog","clickedDate","setClickedDate","addMark","list","document","querySelectorAll","div","createElement","display","flexDirection","justifyContent","alignItems","pointerEvents","padding","diary","selfie","photo","forEach","dot","borderRadius","backgroundColor","marginBottom","now","datas","toDate","dateString","includes","push","hasOwnProperty","innerHTML","checkMonthEvent","defaultView","plugins","dayGridPlugin","interactionPlugin","aspectRatio","dateClick","arg","MyCalendar","Row","noGutters","Col","xl","lg","md","sm","xs","FriendCalendar","useParams","hostOfCalendar","setHostOfCalendar","fetchHost","App","setUser","theme","createMuiTheme","palette","blueGrey","secondary","purple","danger","onAuthStateChanged","ThemeProvider","path","Boolean","hostname","match","ReactDOM","render","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c9a10074.chunk.js","sourcesContent":["import * as firebase from 'firebase';\r\nimport firebaseConfig from './firebase.config';\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport default firebase;\r\n","export default {\r\n  apiKey: 'AIzaSyDp-NJyOw2oU9Og_z351kc482509rLlD4I',\r\n  authDomain: 'snuwebprogramming-group4.firebaseapp.com',\r\n  databaseURL: 'https://snuwebprogramming-group4.firebaseio.com',\r\n  projectId: 'snuwebprogramming-group4',\r\n  storageBucket: 'snuwebprogramming-group4.appspot.com',\r\n  messagingSenderId: '473402337371',\r\n  appId: '1:473402337371:web:a2ea55e16d77128d53b77e',\r\n  measurementId: 'G-M665P2CXW0',\r\n};\r\n","import firebase from './firebase';\r\n\r\nconst db = firebase.firestore();\r\n\r\nconst checkUser = async (uid, email, name) => {\r\n  const result = await db.collection('user')\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return;\r\n  } else {\r\n    await db.collection('user').add({\r\n      uid,\r\n      email,\r\n      name,\r\n    });\r\n  }\r\n};\r\n\r\nconst getUser = async (uid) => {\r\n  const result = await db.collection('user')\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => element.data());\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst searchUserByEmail = async (email) => {\r\n  const result = await db.collection('user')\r\n      .where('email', '==', email)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  } else {\r\n    return null;\r\n  }\r\n};\r\n\r\nconst addFollow = async (follower, following) => {\r\n  await db.collection('follow').add({\r\n    follower,\r\n    following,\r\n  });\r\n};\r\n\r\nconst getFollowing = async (uid) => {\r\n  const result = await db.collection('follow')\r\n      .where('follower', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst getDiaryByDate = async (uid, date) => {\r\n  const result = await db.collection('diary')\r\n      .where('date', '==', date)\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst getDiaryByMonth = async (uid, date) => {\r\n  const start = new Date(`${date.getFullYear()}-${date.getMonth() + 1}-1`);\r\n  const end = new Date(`${date.getFullYear()}-${date.getMonth() + 1}-31`);\r\n  const result = await db.collection('diary')\r\n      .where('date', '>=', start)\r\n      .where('date', '<=', end)\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst addDiary = async (uid, date, content) => {\r\n  await db.collection('diary').add({\r\n    uid,\r\n    date,\r\n    content,\r\n  });\r\n};\r\n\r\nconst deleteDiary = async (docId) => {\r\n  await db.collection('diary').doc(docId).delete();\r\n};\r\n\r\nconst getScheduleByMonth = async (uid, date) => {\r\n  const start = new Date(`${date.getFullYear()}-${date.getMonth() + 1}-1`);\r\n  const end = new Date(`${date.getFullYear()}-${date.getMonth() + 1}-31`);\r\n  const result = await db.collection('schedule')\r\n      .where('date', '>=', start)\r\n      .where('date', '<=', end)\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst getScheduleByDate = async (uid, date) => {\r\n  const result = await db.collection('schedule')\r\n      .where('date', '==', date)\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst addSchedule = async (uid, date, content) => {\r\n  await db.collection('schedule').add({\r\n    uid,\r\n    date,\r\n    content,\r\n    done: false,\r\n  });\r\n};\r\n\r\nconst deleteSchedule = async (docId) => {\r\n  await db.collection('schedule').doc(docId).delete();\r\n};\r\n\r\nconst doneSchedule = async (docId) => {\r\n  await db.collection('schedule').doc(docId).update({\r\n    done: true,\r\n  });\r\n};\r\n\r\nconst undoSchedule = async (docId) => {\r\n  await db.collection('schedule').doc(docId).update({\r\n    done: false,\r\n  });\r\n};\r\n\r\nconst getSelfieByDate = async (uid, date) => {\r\n  const result = await db.collection('selfie')\r\n      .where('date', '==', date)\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst getSelfieByMonth = async (uid, date) => {\r\n  const start = new Date(`${date.getFullYear()}-${date.getMonth() + 1}-1`);\r\n  const end = new Date(`${date.getFullYear()}-${date.getMonth() + 1}-31`);\r\n  const result = await db.collection('selfie')\r\n      .where('date', '>=', start)\r\n      .where('date', '<=', end)\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst addSelfie = async (uid, date, file, face) => {\r\n  const ref = firebase.storage().ref();\r\n  const task = ref.child(`${uid}/selfie/${file.name}`)\r\n      .put(file, {contentType: file.type});\r\n  const snapshot = await task;\r\n  const url = await snapshot.ref.getDownloadURL();\r\n  await db.collection('selfie').add({\r\n    uid,\r\n    date,\r\n    imageName: file.name,\r\n    imageUrl: url,\r\n    face,\r\n  });\r\n};\r\n\r\nconst deleteSelfie = async (uid, imageName, docId) => {\r\n  const ref = firebase.storage().ref();\r\n  const fileRef = ref.child(`${uid}/selfie/${imageName}`);\r\n  fileRef.delete().then(async () => {\r\n    await db.collection('selfie').doc(docId).delete();\r\n  });\r\n};\r\n\r\nconst getPhotosByDate = async (uid, date) => {\r\n  const result = await db.collection('photo')\r\n      .where('date', '==', date)\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst getPhotosByMonth = async (uid, date) => {\r\n  const start = new Date(`${date.getFullYear()}-${date.getMonth() + 1}-1`);\r\n  const end = new Date(`${date.getFullYear()}-${date.getMonth() + 1}-31`);\r\n  const result = await db.collection('photo')\r\n      .where('date', '>=', start)\r\n      .where('date', '<=', end)\r\n      .where('uid', '==', uid)\r\n      .get();\r\n  if (!result.empty) {\r\n    return result.docs.map((element) => {\r\n      const data = element.data();\r\n      data.id = element.id;\r\n      return data;\r\n    });\r\n  }\r\n  return null;\r\n};\r\n\r\nconst addPhoto = async (uid, date, file) => {\r\n  const ref = firebase.storage().ref();\r\n  const task = ref.child(`${uid}/photo/${file.name}`)\r\n      .put(file, {contentType: file.type});\r\n  const snapshot = await task;\r\n  const url = await snapshot.ref.getDownloadURL();\r\n  await db.collection('photo').add({\r\n    uid,\r\n    date,\r\n    imageName: file.name,\r\n    imageUrl: url,\r\n  });\r\n};\r\n\r\nconst deletePhoto = async (uid, imageName, docId) => {\r\n  const ref = firebase.storage().ref();\r\n  const fileRef = ref.child(`${uid}/photo/${imageName}`);\r\n  await fileRef.delete();\r\n  await db.collection('photo').doc(docId).delete();\r\n};\r\n\r\nexport default {\r\n  checkUser,\r\n  getUser,\r\n  searchUserByEmail,\r\n  addFollow,\r\n  getFollowing,\r\n\r\n  getDiaryByDate,\r\n  getDiaryByMonth,\r\n  addDiary,\r\n  deleteDiary,\r\n\r\n  getScheduleByMonth,\r\n  getScheduleByDate,\r\n  addSchedule,\r\n  deleteSchedule,\r\n  doneSchedule,\r\n  undoSchedule,\r\n\r\n  getSelfieByDate,\r\n  getSelfieByMonth,\r\n  addSelfie,\r\n  deleteSelfie,\r\n\r\n  getPhotosByDate,\r\n  getPhotosByMonth,\r\n  addPhoto,\r\n  deletePhoto,\r\n};\r\n","import React from 'react';\r\nimport './css/Home.css';\r\nimport {\r\n  Fade,\r\n  Button,\r\n} from 'reactstrap';\r\nimport {\r\n  Link,\r\n} from 'react-router-dom';\r\nimport firebase from '../firebase';\r\nimport firestoreHandler from '../firestoreHandler';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Home = (props) => {\r\n  const googleLogin = async () => {\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    firebase.auth().signInWithPopup(provider);\r\n  };\r\n  const logout = async () => {\r\n    firebase.auth().signOut();\r\n  };\r\n  const checkUser = async () => {\r\n    firestoreHandler.checkUser(\r\n        props.user.uid,\r\n        props.user.email,\r\n        props.user.displayName\r\n    );\r\n  };\r\n  return (\r\n    <div id=\"home\" className=\"d-flex flex-column\r\n      justify-content-center align-items-end px-5\">\r\n      <div className=\"d-flex flex-column align-items-center\r\n        text-light mr-5 mb-5 h4\">\r\n        <Fade in={true}>\r\n        </Fade>\r\n        {\r\n          !props.user &&\r\n          <Button outline color=\"light\" className=\"mr-1\" onClick={googleLogin}>\r\n            <div className=\"d-flex align-items-center\">\r\n              <img src=\"/google_logo.png\"\r\n                alt=\"google_logo\"\r\n                id=\"google-logo\" className=\"mr-2\"\r\n              />\r\n              구글 아이디로 로그인\r\n            </div>\r\n          </Button>\r\n        }\r\n        {\r\n          props.user &&\r\n          <span className=\"mb-3\">{props.user.displayName}님 안녕하세요</span>\r\n        }\r\n        {\r\n          props.user &&\r\n          <div className=\"d-flex\">\r\n            <Link to=\"/mycalendar\">\r\n              <Button color=\"blueGrey\" className=\"mr-2\" onClick={checkUser}>\r\n                메인으로\r\n              </Button>\r\n            </Link>\r\n            <Button color=\"dark\" onClick={logout}>로그아웃</Button>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nHome.propTypes = {\r\n  user: PropTypes.shape({\r\n    uid: PropTypes.string,\r\n    email: PropTypes.string,\r\n    displayName: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default Home;\r\n","import React, {useState, useEffect} from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport {\r\n  AppBar,\r\n  Toolbar,\r\n  Typography,\r\n  IconButton,\r\n  Drawer,\r\n  Divider,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n} from '@material-ui/core';\r\nimport {\r\n  Button,\r\n  Modal,\r\n  ModalHeader,\r\n  ModalBody,\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  Input,\r\n  Card,\r\n  CardText,\r\n} from 'reactstrap';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport './css/MainLayout.css';\r\nimport firestoreHandler from '../firestoreHandler';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Layout = (props) => {\r\n  const [open, setOpen] = useState(false);\r\n  const [showAddFriendModal, setShowAddFriendModal] = useState(false);\r\n  const [searchEmail, setSearchEmail] = useState('');\r\n  const [searchedUser, setSearchedUser] = useState();\r\n  const [followingList, setFollowingList] = useState([]);\r\n\r\n  const fetchFollowingList = async () => {\r\n    const data = await firestoreHandler.getFollowing(props.user.uid);\r\n    if (data) {\r\n      setFollowingList(data);\r\n    } else {\r\n      setFollowingList([]);\r\n    }\r\n  };\r\n  const openDrawer = () => {\r\n    setOpen(true);\r\n  };\r\n  const closeDrawer = () => {\r\n    setOpen(false);\r\n  };\r\n  const searchByEmail = async () => {\r\n    const result = await firestoreHandler.searchUserByEmail(searchEmail);\r\n    if (result) {\r\n      setSearchedUser(result[0]);\r\n    } else {\r\n      setSearchedUser(-1);\r\n    }\r\n  };\r\n  const addFollow = async (following) => {\r\n    await firestoreHandler.addFollow(props.user.uid, following);\r\n    await fetchFollowingList();\r\n    setShowAddFriendModal(false);\r\n    setOpen(true);\r\n  };\r\n  const followExist = (uid) => {\r\n    const find = followingList.find((element) => element.following.uid === uid);\r\n    if (find) {\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n  useEffect(() => {\r\n    fetchFollowingList();\r\n  }, []);\r\n  return (\r\n    <div>\r\n      <Modal isOpen={showAddFriendModal} toggle={() =>\r\n        setShowAddFriendModal(!showAddFriendModal)}>\r\n        <ModalHeader toggle={() => setShowAddFriendModal(!showAddFriendModal)}>\r\n            팔로우</ModalHeader>\r\n        <ModalBody>\r\n          <div className=\"d-flex flex-column\">\r\n            <InputGroup>\r\n              <Input type=\"text\" value={searchEmail} onChange={(e) =>\r\n                setSearchEmail(e.target.value)}\r\n              placeholder=\"이메일로 검색\"\r\n              onKeyPress={(e) => {\r\n                if (e.charCode === 13 ) {\r\n                  searchByEmail();\r\n                }\r\n              }}\r\n              />\r\n              <InputGroupAddon addonType=\"append\">\r\n                <Button color=\"blueGrey\" onClick={searchByEmail}>검색</Button>\r\n              </InputGroupAddon>\r\n            </InputGroup>\r\n            {\r\n              searchedUser && searchedUser !== -1 &&\r\n              <Card body className=\"mt-2\">\r\n                <CardText>이름: {searchedUser.name}</CardText>\r\n                <CardText>이메일: {searchedUser.email}</CardText>\r\n                <Button color=\"blueGrey\"\r\n                  disabled={followExist(searchedUser.uid)}\r\n                  onClick={() => addFollow(searchedUser)}>\r\n                  {\r\n                    followExist(searchedUser.uid) &&\r\n                    '팔로우됨'\r\n                  }\r\n                  {\r\n                    !followExist(searchedUser.uid) &&\r\n                    '팔로우'\r\n                  }\r\n                </Button>\r\n              </Card>\r\n            }\r\n            {\r\n              searchedUser === -1 &&\r\n              <Card body className=\"mt-2\">\r\n                <CardText>검색 결과가 없습니다.</CardText>\r\n              </Card>\r\n            }\r\n          </div>\r\n        </ModalBody>\r\n      </Modal>\r\n      <AppBar position=\"static\" color=\"primary\">\r\n        <Toolbar variant=\"dense\" color=\"primary\">\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"menu\"\r\n            onClick={openDrawer}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\">\r\n            {props.title}\r\n          </Typography>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Drawer\r\n        open={open}\r\n        variant=\"persistent\"\r\n        anchor=\"left\"\r\n      >\r\n        <div id=\"drawer-container\">\r\n          <div id=\"drawer-header\" className=\"d-flex justify-content-end\">\r\n            <ListItem button component={Link} to=\"\" onClick={closeDrawer}>\r\n              <ListItemText primary={'홈'} />\r\n            </ListItem>\r\n            <IconButton onClick={closeDrawer}>\r\n              <ChevronLeftIcon />\r\n            </IconButton>\r\n          </div>\r\n          <Divider />\r\n          <List>\r\n            <ListItem button component={Link} to=\"/mycalendar\"\r\n              onClick={closeDrawer}\r\n              selected={window.location.pathname === '/mycalendar'}>\r\n              <ListItemText primary={'내 캘린더'} />\r\n            </ListItem>\r\n            <div className=\"d-flex flex-column w-100 mt-3\">\r\n              <div className=\"d-flex justify-content-between\r\n                  align-items-center px-3\">\r\n                <div id=\"friend-list-title\">팔로잉</div>\r\n                <Button className=\"my-1\" color=\"blueGrey\"\r\n                  size=\"sm\" onClick={() => {\r\n                    setSearchEmail('');\r\n                    setSearchedUser();\r\n                    setOpen(false); setShowAddFriendModal(true);\r\n                  } }>팔로우 추가</Button>\r\n              </div>\r\n              {\r\n                followingList.map((element) => {\r\n                  return (\r\n                    <ListItem\r\n                      component={Link} to=\r\n                        {`/friendcalendar/${element.following.uid}`}\r\n                      selected={window.location.pathname.split('/')[1] ===\r\n                      'friendcalendar'&&\r\n                      window.location.pathname.split('/')[2]===\r\n                      element.following.uid}\r\n                      key={element.id} button className=\"pl-4\">\r\n                      <ListItemText primary={`${element.following.email}\r\n                      (${element.following.name})`} />\r\n                    </ListItem>\r\n                  );\r\n                })\r\n              }\r\n            </div>\r\n          </List>\r\n        </div>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n};\r\n\r\nLayout.propTypes = {\r\n  user: PropTypes.shape({\r\n    uid: PropTypes.string,\r\n    email: PropTypes.string,\r\n    displayName: PropTypes.string,\r\n  }).isRequired,\r\n  title: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Layout;\r\n","import React from 'react';\r\nimport {Button} from 'reactstrap';\r\nimport RecordRTC from 'recordrtc';\r\nimport './css/Diary.css';\r\nimport firestoreHandler from '../firestoreHandler';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Diary = ({host, date, mine}) => {\r\n  const [recorder, setRecorder] = React.useState();\r\n  const [diaryData, setDiaryData] = React.useState();\r\n  const [text, setText] = React.useState();\r\n  const [status, setStatus] = React.useState('');\r\n  const [show, setShow] = React.useState();\r\n\r\n  const fetchDiaryData = async () => {\r\n    const data = await firestoreHandler.getDiaryByDate(host, date);\r\n    if (data) {\r\n      setDiaryData(data);\r\n      setText(data[0].content);\r\n    } else {\r\n      setDiaryData();\r\n    }\r\n  };\r\n  const stt = async (blob) => {\r\n    const clientId = 'c5cgt7y1jj';\r\n    const clientSecret = '4giwRMopxVDhA3Rv3Bnayizkd7vs8JDNnfLpMWQO';\r\n    const url = `https://cors-anywhere.herokuapp.com/https://naveropenapi.apigw.ntruss.com/recog/v1/stt?lang=Kor`;\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/octet-stream',\r\n        'X-NCP-APIGW-API-KEY-ID': clientId,\r\n        'X-NCP-APIGW-API-KEY': clientSecret,\r\n      },\r\n      body: blob,\r\n    });\r\n    const data = await response.json();\r\n    setText(data.text);\r\n  };\r\n  const startRecord = () => {\r\n    const success = async (stream) => {\r\n      // eslint-disable-next-line\r\n      const tempRecorder = RecordRTC(stream, {\r\n        type: 'video',\r\n      });\r\n      setStatus('녹음중...');\r\n      tempRecorder.startRecording();\r\n      setRecorder(tempRecorder);\r\n    };\r\n    const error = (error) => {\r\n      console.log(error);\r\n    };\r\n    navigator.getUserMedia({audio: true}, success, error);\r\n  };\r\n  const stopRecord = () => {\r\n    recorder.stopRecording(async () => {\r\n      const blob = recorder.getBlob();\r\n      setStatus('음성 해석중...');\r\n      await stt(blob);\r\n      setStatus('');\r\n    });\r\n  };\r\n  const addDiary = async () => {\r\n    await firestoreHandler.addDiary(host, date, text);\r\n    await fetchDiaryData();\r\n  };\r\n\r\n  const deleteDiary = async () => {\r\n    await firestoreHandler.deleteDiary(diaryData[0].id);\r\n    await fetchDiaryData();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    fetchDiaryData();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    if (mine) {\r\n      if (diaryData) {\r\n        setShow('editableDiaryPage');\r\n      } else {\r\n        setShow('addDiaryPage');\r\n      }\r\n    } else {\r\n      if (diaryData) {\r\n        setShow('uneditableDiaryPage');\r\n      } else {\r\n        setShow('noDataPage');\r\n      }\r\n    }\r\n  }, [mine, diaryData]);\r\n  return (\r\n    <div className=\"d-flex w-100 h-100 flex-column px-3 py-3\">\r\n      {\r\n        show === 'editableDiaryPage' && diaryData &&\r\n        <div className=\"w-100 h-100 d-flex flex-column\">\r\n          <div id=\"diary\" className=\"border px-2 py-2 mb-2\">\r\n            {diaryData[0].content}\r\n          </div>\r\n          <div className=\"d-flex justify-content-center\">\r\n            <Button color=\"red\" onClick={deleteDiary}>다시 작성하기</Button>\r\n          </div>\r\n        </div>\r\n      }\r\n      {\r\n        show === 'addDiaryPage' &&\r\n        <div className=\"d-flex w-100 h-100 flex-column\">\r\n          {\r\n            status === '' &&\r\n            <textarea type=\"text\" className=\"w-100\" id=\"diary\" value={text}\r\n              onChange={(e) => {\r\n                setText(e.target.value);\r\n              }}\r\n              onKeyPress={(e) => {\r\n                if (e.charCode === 13 && !e.shiftKey) {\r\n                  e.preventDefault(); addDiary();\r\n                }\r\n              }}\r\n            />\r\n          }\r\n          {\r\n            status !== '' &&\r\n            <div className=\"w-100 d-flex justify-content-center\r\n              align-items-center h4\" id=\"status\">{status}</div>\r\n          }\r\n          <div className=\"d-flex justify-content-end mt-2\">\r\n            <Button color=\"blue\" className=\"mr-1\" onClick={startRecord}>\r\n                Start Recording</Button>\r\n            <Button color=\"blue\" className=\"mr-1\" onClick={stopRecord}>\r\n                Stop Recording</Button>\r\n            <Button color=\"brown\"\r\n              onClick={addDiary}\r\n            >\r\n            Save\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      }\r\n      {\r\n        show === 'uneditableDiaryPage' && diaryData &&\r\n        <div className=\"w-100 h-100 d-flex flex-column\">\r\n          <div className=\"2-100 h-100 border px-2 py-2 mb-2\">\r\n            {diaryData[0].content}\r\n          </div>\r\n        </div>\r\n      }\r\n      {\r\n        show === 'noDataPage' &&\r\n        <div className=\"h-100 w-100 d-flex flex-column\r\n            justify-content-center align-items-center\">\r\n          <span className=\"h4\">등록된 Diary가 없습니다.</span>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nDiary.propTypes = {\r\n  date: PropTypes.any,\r\n  host: PropTypes.string.isRequired,\r\n  mine: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Diary;\r\n","import React from 'react';\r\nimport {\r\n  Spinner,\r\n  Button,\r\n  Input,\r\n} from 'reactstrap';\r\nimport './css/Selfie.css';\r\nimport PropTypes from 'prop-types';\r\nimport firestoreHandler from '../firestoreHandler';\r\n\r\nconst Selfie = ({date, host, mine}) => {\r\n  const [selfieData, setSelfieData] = React.useState();\r\n  const [uploading, setUploading] = React.useState(false);\r\n  const [show, setShow] = React.useState();\r\n  const fetchSelfieData = async () => {\r\n    const data = await firestoreHandler.getSelfieByDate(host, date);\r\n    if (data) {\r\n      setSelfieData(data[0]);\r\n    }\r\n  };\r\n  const handleChange = async (e) => {\r\n    setUploading(true);\r\n    const formData = new FormData();\r\n    const file = e.target.files[0];\r\n    formData.append('image', file);\r\n    const url = 'https://cors-anywhere.herokuapp.com/https://openapi.naver.com/v1/vision/face';\r\n    const response = await fetch(url, {\r\n      method: 'POST',\r\n      headers: {\r\n        'X-Naver-Client-Id': process.env.REACT_APP_NAVER_CLIENT_ID,\r\n        'X-Naver-Client-Secret': process.env.REACT_APP_NAVER_CLIENT_SECRET,\r\n      },\r\n      body: formData,\r\n    });\r\n    const data = await response.json();\r\n    let face;\r\n    if (data.info.faceCount === 1) {\r\n      face = data.faces[0];\r\n    } else {\r\n      face = null;\r\n    }\r\n    await firestoreHandler.addSelfie(host, date, file, face);\r\n    await fetchSelfieData();\r\n    setUploading(false);\r\n  };\r\n  const deleteSelfie = async () => {\r\n    await firestoreHandler.deleteSelfie(\r\n        host, selfieData.imageName, selfieData.id);\r\n    setSelfieData();\r\n  };\r\n  React.useEffect(() => {\r\n    fetchSelfieData();\r\n  }, []);\r\n  React.useEffect(() => {\r\n    if (mine) {\r\n      if (selfieData) {\r\n        setShow('editableSelfiePage');\r\n      } else {\r\n        setShow('addButtonPage');\r\n      }\r\n    } else {\r\n      if (selfieData) {\r\n        setShow('uneditableSelfiePage');\r\n      } else {\r\n        setShow('noDataPage');\r\n      }\r\n    }\r\n  }, [mine, selfieData]);\r\n  return (\r\n    <div className=\"h-100 d-flex\">\r\n      <Input id=\"selfie-input\" type=\"file\" onChange={handleChange} />\r\n      {\r\n        show === 'editableSelfiePage' &&\r\n        <div className=\"h-100 w-100 d-flex flex-column\r\n          justify-content-center align-items-center\">\r\n          <img id=\"selfie-image\" src={selfieData ?\r\n            selfieData.imageUrl : ''} alt=\"selfie\" />\r\n          <span className=\"h4 my-2\">{selfieData && selfieData.face ?\r\n            selfieData.face.emotion.value : '얼굴 인식 불가'}</span>\r\n          <Button color=\"red\" onClick={deleteSelfie}>삭제</Button>\r\n        </div>\r\n      }\r\n      {\r\n        show === 'addButtonPage' &&\r\n        <div className=\"h-100 w-100 d-flex justify-content-center\r\n          align-items-center\">\r\n          <label htmlFor=\"selfie-input\">\r\n            <div id=\"selfie-add-button\" className=\"bg-blueGrey\r\n            text-light rounded px-3 py-1\">\r\n              {\r\n                uploading &&\r\n                <Spinner size=\"sm\" color=\"light\" />\r\n              }\r\n              {\r\n                !uploading &&\r\n                '추가하기'\r\n              }\r\n            </div>\r\n          </label>\r\n        </div>\r\n      }\r\n      {\r\n        show === 'uneditableSelfiePage' &&\r\n        <div className=\"h-100 w-100 d-flex flex-column\r\n          justify-content-center align-items-center\">\r\n          <img id=\"selfie-image\" src={selfieData ?\r\n            selfieData.imageUrl : ''} alt=\"selfie\" />\r\n          <span className=\"h4 mb-3\">{selfieData && selfieData.face ?\r\n            selfieData.face.emotion.value : '얼굴 인식 불가'}</span>\r\n        </div>\r\n      }\r\n      {\r\n        show === 'noDataPage' &&\r\n        <div className=\"h-100 w-100 d-flex flex-column\r\n          justify-content-center align-items-center\">\r\n          <span className=\"h4\">등록된 Selfie가 없습니다.</span>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nSelfie.propTypes = {\r\n  date: PropTypes.any,\r\n  host: PropTypes.string.isRequired,\r\n  mine: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Selfie;\r\n","import React from 'react';\r\nimport {Button, Input} from 'reactstrap';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport firestoreHandler from '../firestoreHandler';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './css/Photo.css';\r\nconst Photo = ({date, host, mine}) => {\r\n  const [photoDatas, setPhotoDatas] = React.useState([]);\r\n  const [show, setShow] = React.useState();\r\n\r\n  const fetchPhotoDatas = async () => {\r\n    const data = await firestoreHandler.getPhotosByDate(host, date);\r\n    if (data) {\r\n      console.log(data);\r\n      setPhotoDatas(data);\r\n    } else {\r\n      setPhotoDatas([]);\r\n    }\r\n  };\r\n  const deletePhoto = async (name, docId) => {\r\n    await firestoreHandler.deletePhoto(host, name, docId);\r\n    await fetchPhotoDatas();\r\n  };\r\n  const handleChange = async (e) => {\r\n    for (const file of e.target.files) {\r\n      await firestoreHandler.addPhoto(host, date, file);\r\n    }\r\n    await fetchPhotoDatas();\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (mine) {\r\n      setShow('myPhotoPage');\r\n    } else {\r\n      if (photoDatas.length !== 0) {\r\n        setShow('friendsPhotoPage');\r\n      } else {\r\n        setShow('noDataPage');\r\n      }\r\n    }\r\n  }, [mine, photoDatas]);\r\n\r\n  React.useEffect(() => {\r\n    fetchPhotoDatas();\r\n  }, []);\r\n  return (\r\n    <div className=\"h-100 d-flex px-3 py-3\">\r\n      {\r\n        show === 'myPhotoPage' &&\r\n        <div id=\"photo-area\" className=\"h-100 w-100 d-flex\r\n        flex-wrap align-content-start\">\r\n          <Input id=\"photo-input\" type=\"file\"\r\n            multiple onChange={handleChange} />\r\n          {\r\n            photoDatas.map((photoData) => {\r\n              const imageStyle= {\r\n                height: '150px',\r\n                width: '150px',\r\n                backgroundImage: `url(${photoData.imageUrl})`,\r\n                backgroundRepeat: 'no-repeat',\r\n                backgroundSize: 'contain',\r\n                backgroundPosition: 'center',\r\n              };\r\n              return (\r\n                <div style = { imageStyle } key={photoData.id}\r\n                  className=\"mx-1 my-1\">\r\n                  <div className=\"hover d-flex justify-content-center\r\n                    align-items-center\">\r\n                    <Button color=\"red\" onClick={() =>\r\n                      deletePhoto(photoData.imageName, photoData.id)}>\r\n                      삭제</Button>\r\n                  </div>\r\n                </div>\r\n              );\r\n            })\r\n          }\r\n          <label htmlFor=\"photo-input\">\r\n            <div id=\"add-box\" className=\"border d-flex\r\n              justify-content-center align-items-center display-4 mx-1 my-1\">\r\n              <AddIcon color=\"primary\" />\r\n            </div>\r\n          </label>\r\n        </div>\r\n      }\r\n      {\r\n        show === 'friendsPhotoPage' &&\r\n        <div id=\"photo-area\" className=\"h-100 w-100\r\n          d-flex flex-wrap align-content-start\">\r\n          {\r\n            photoDatas.map((photoData) => {\r\n              const imageStyle= {\r\n                height: '150px',\r\n                width: '150px',\r\n                backgroundImage: `url(${photoData.imageUrl})`,\r\n                backgroundRepeat: 'no-repeat',\r\n                backgroundSize: 'contain',\r\n                backgroundPosition: 'center',\r\n              };\r\n              return (\r\n                <div style = { imageStyle } key={photoData.id}\r\n                  className=\"mx-1 my-1\">\r\n                </div>\r\n              );\r\n            })\r\n          }\r\n        </div>\r\n      }\r\n      {\r\n        show === 'noDataPage' &&\r\n        <div id=\"photo-area\" className=\"h-100 w-100 d-flex\r\n          justify-content-center align-items-center h4\">\r\n          등록된 Photo가 없습니다.\r\n        </div>\r\n      }\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nPhoto.propTypes = {\r\n  date: PropTypes.any,\r\n  host: PropTypes.string.isRequired,\r\n  mine: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Photo;\r\n","import React from 'react';\r\nimport {Button, Input} from 'reactstrap';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport firestoreHandler from '../firestoreHandler';\r\nimport './css/Schedule.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Schedule = ({date, host, mine}) => {\r\n  const [schedule, setSchedule] = React.useState('');\r\n  const [scheduleList, setScheduleList] = React.useState([]);\r\n  const [show, setShow] = React.useState();\r\n\r\n  const fetchSchedule = async () => {\r\n    const data = await firestoreHandler.getScheduleByDate(host, date);\r\n    if (data) {\r\n      setScheduleList(data);\r\n    } else {\r\n      setScheduleList([]);\r\n    }\r\n  };\r\n  const addSchedule = async () => {\r\n    if (schedule) {\r\n      await firestoreHandler.addSchedule(host, date, schedule);\r\n      await fetchSchedule();\r\n      setSchedule('');\r\n    }\r\n  };\r\n  const deleteSchedule = async (docId) => {\r\n    await firestoreHandler.deleteSchedule(docId);\r\n    await fetchSchedule();\r\n  };\r\n  const doneChange = async (docId, done) => {\r\n    if (done === false) {\r\n      await firestoreHandler.doneSchedule(docId);\r\n    } else {\r\n      await firestoreHandler.undoSchedule(docId);\r\n    } await fetchSchedule();\r\n  };\r\n  const handleKeyEvent = (e) => {\r\n    if (window.event.keyCode === 13) {\r\n      if (e.target.value.trim() === '') {\r\n        return;\r\n      }\r\n      addSchedule();\r\n    }\r\n  };\r\n  React.useEffect(() => {\r\n    fetchSchedule();\r\n  }, []);\r\n  React.useEffect(() => {\r\n    if (mine) {\r\n      setShow('editableSchedulePage');\r\n    } else {\r\n      if (scheduleList.length !== 0) {\r\n        setShow('uneditableSchedulePage');\r\n      } else {\r\n        setShow('noDataPage');\r\n      }\r\n    }\r\n  }, [mine, scheduleList]);\r\n  return (\r\n    <div className=\"h-100\">\r\n      {\r\n        show === 'editableSchedulePage' &&\r\n      <div>\r\n        <div className=\"d-flex align-items-center\">\r\n          <Input id =\"inputText\" placeholder=\"add your task\"\r\n            className=\"w-70\" onKeyPress={handleKeyEvent}\r\n            type=\"text\" onChange={(e) => setSchedule(e.target.value)}\r\n            value={schedule}>\r\n          </Input>\r\n          <Button color=\"blue\" onClick={addSchedule}> add </Button>\r\n        </div>\r\n        {\r\n          scheduleList.map((element) => {\r\n            const check = (element.done === true) ? 'true' : 'false';\r\n            return (\r\n              <div className=\"w-100 d-flex align-items-center\r\n              justify-content-between\"\r\n              key={element.id} >\r\n                <div className= \"d-flex align-items-center\" >\r\n                  <Checkbox onChange={() =>\r\n                    doneChange(element.id, element.done)}\r\n                  checked={element.done} color=\"primary\"\r\n                  inputProps={{'aria-label': 'secondary checkbox'}}/>\r\n                  <div id = {check}>\r\n                    {element.content}\r\n                  </div>\r\n                </div>\r\n                <Button color=\"yellow\" onClick={() =>\r\n                  deleteSchedule(element.id)}>delete</Button>\r\n              </div>\r\n            );\r\n          }\r\n          )}\r\n      </div>\r\n      }\r\n      {\r\n        show === 'uneditableSchedulePage' &&\r\n        scheduleList.map((element) => {\r\n          const check = (element.done === true) ? 'true' : 'false';\r\n          return (\r\n            <div className = \"w-100 d-flex align-items-center\" key={element.id}>\r\n              <Checkbox\r\n                checked={element.done} color=\"primary\"\r\n                inputProps={{'aria-label': 'secondary checkbox'}}/>\r\n              <div id = {check}>\r\n                {element.content}\r\n              </div>\r\n            </div>\r\n          );\r\n        })\r\n      }\r\n      {\r\n        show === 'noDataPage' &&\r\n        <div className=\"h-100 w-100 d-flex flex-column\r\n          justify-content-center align-items-center\">\r\n          <span className=\"h4\"> 등록된 Schedule이 없습니다. </span>\r\n        </div>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nSchedule.propTypes = {\r\n  date: PropTypes.any,\r\n  host: PropTypes.string.isRequired,\r\n  mine: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Schedule;\r\n","import React from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport {TabContent, TabPane, Nav, NavItem, NavLink} from 'reactstrap';\r\nimport Diary from './Diary';\r\nimport Selfie from './Selfie';\r\nimport Photo from './Photo';\r\nimport Schedule from './Schedule';\r\nimport './css/DayDialog.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst DayDialog = (props) => {\r\n  const date = props.date;\r\n  const host = props.host;\r\n  const mine = props.mine;\r\n  const [activeTab, setActiveTab] = React.useState('diary');\r\n\r\n  const toggle = (tab) => {\r\n    if (activeTab !== tab) setActiveTab(tab);\r\n  };\r\n  return (\r\n    <Dialog onClose={props.toggle} open={props.open}>\r\n      <div className=\"d-flex flex-column px-5 py-5 h-100\">\r\n        <h1>{date ? `${date.getFullYear()}년 ${date.getMonth()+1}월 \r\n        ${date.getDate()}일` : ''}</h1>\r\n        <Nav tabs>\r\n          <NavItem>\r\n            <NavLink\r\n              className={activeTab === 'diary' ? 'active' : ''}\r\n              onClick={() => {\r\n                toggle('diary');\r\n              }}\r\n            >\r\n              Diary\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink\r\n              className={activeTab === 'selfie' ? 'active' : ''}\r\n              onClick={() => {\r\n                toggle('selfie');\r\n              }}\r\n            >\r\n              Selfie\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink\r\n              className={activeTab === 'photo' ? 'active' : ''}\r\n              onClick={() => {\r\n                toggle('photo');\r\n              }}\r\n            >\r\n              Photo\r\n            </NavLink>\r\n          </NavItem>\r\n          <NavItem>\r\n            <NavLink\r\n              className={activeTab === 'schedule' ? 'active' : ''}\r\n              onClick={() => {\r\n                toggle('schedule');\r\n              }}\r\n            >\r\n              Schedule\r\n            </NavLink>\r\n          </NavItem>\r\n        </Nav>\r\n        <TabContent activeTab={activeTab}>\r\n          <TabPane tabId=\"diary\">\r\n            <Diary date={date} host={host} mine={mine} />\r\n          </TabPane>\r\n          <TabPane tabId=\"selfie\">\r\n            <Selfie date={date} host={host} mine={mine} />\r\n          </TabPane>\r\n          <TabPane tabId=\"photo\">\r\n            <Photo date={date} host={host} mine={mine} />\r\n          </TabPane>\r\n          <TabPane tabId=\"schedule\">\r\n            <Schedule date={date} host={host} mine={mine} />\r\n          </TabPane>\r\n        </TabContent>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nDayDialog.propTypes = {\r\n  date: PropTypes.any,\r\n  host: PropTypes.string.isRequired,\r\n  mine: PropTypes.bool.isRequired,\r\n  toggle: PropTypes.func,\r\n  open: PropTypes.bool,\r\n};\r\n\r\nexport default DayDialog;\r\n","import React from 'react';\r\nimport DayDialog from './DayDialog';\r\nimport FullCalendar from '@fullcalendar/react';\r\nimport dayGridPlugin from '@fullcalendar/daygrid';\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport '@fullcalendar/core/main.css';\r\nimport '@fullcalendar/daygrid/main.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport firestoreHandler from '../firestoreHandler';\r\nconst formatDate = (date) => {\r\n  const d = new Date(date);\r\n  let month = '' + (d.getMonth() + 1);\r\n  let day = '' + d.getDate();\r\n  const year = d.getFullYear();\r\n  if (month.length < 2) {\r\n    month = '0' + month;\r\n  }\r\n  if (day.length < 2) {\r\n    day = '0' + day;\r\n  }\r\n  return [year, month, day].join('-');\r\n};\r\n\r\nconst Calendar = (props) => {\r\n  const [showDayDialog, setShowDayDialog] = React.useState(false);\r\n  const [clickedDate, setClickedDate] = React.useState();\r\n  const clickDate = (arg) => {\r\n    const date = new Date(arg.date);\r\n    setClickedDate(date);\r\n    setShowDayDialog(true);\r\n  };\r\n  const addMark = (date, list) => {\r\n    const element = document.querySelectorAll(`[data-date='${date}']`)[0];\r\n    const div = document.createElement('div');\r\n    div.style.width = '100%';\r\n    div.style.height = '100%';\r\n    div.style.display = 'flex';\r\n    div.style.flexDirection = 'column';\r\n    div.style.justifyContent = 'flex-end';\r\n    div.style.alignItems = 'flex-start';\r\n    div.style.pointerEvents = 'none';\r\n    div.style.padding = '10px';\r\n    const color = {\r\n      diary: 'red',\r\n      selfie: 'orange',\r\n      photo: 'cyan',\r\n      schedule: 'blue',\r\n    };\r\n    list.forEach((element) => {\r\n      const dot = document.createElement('div');\r\n      dot.style.width = '5px';\r\n      dot.style.height = '5px';\r\n      dot.style.borderRadius ='50%';\r\n      dot.style.backgroundColor = color[element];\r\n      dot.style.marginBottom = '4px';\r\n      div.append(dot);\r\n    });\r\n    element.append(div);\r\n  };\r\n  const checkMonthEvent = async () => {\r\n    const now = new Date(Date.now());\r\n    const diary = await firestoreHandler.getDiaryByMonth(props.host, now);\r\n    const selfie = await firestoreHandler.getSelfieByMonth(props.host, now);\r\n    const photo = await firestoreHandler.getPhotosByMonth(props.host, now);\r\n    const schedule = await firestoreHandler.getScheduleByMonth(props.host, now);\r\n    const datas = {};\r\n    if (diary) {\r\n      diary.forEach((element) => {\r\n        const date = new Date(element.date.toDate());\r\n        const dateString = formatDate(date);\r\n        if (datas[dateString]) {\r\n          if (!datas[dateString].includes('diary')) {\r\n            datas[dateString].push('diary');\r\n          }\r\n        } else {\r\n          datas[dateString] = ['diary'];\r\n        }\r\n      });\r\n    }\r\n    if (selfie) {\r\n      selfie.forEach((element) => {\r\n        const date = new Date(element.date.toDate());\r\n        const dateString = formatDate(date);\r\n        if (datas[dateString]) {\r\n          if (!datas[dateString].includes('selfie')) {\r\n            datas[dateString].push('selfie');\r\n          }\r\n        } else {\r\n          datas[dateString] = ['selfie'];\r\n        }\r\n      });\r\n    }\r\n    if (photo) {\r\n      photo.forEach((element) => {\r\n        const date = new Date(element.date.toDate());\r\n        const dateString = formatDate(date);\r\n        if (datas[dateString]) {\r\n          if (!datas[dateString].includes('photo')) {\r\n            datas[dateString].push('photo');\r\n          }\r\n        } else {\r\n          datas[dateString] = ['photo'];\r\n        }\r\n      });\r\n    }\r\n    if (schedule) {\r\n      schedule.forEach((element) => {\r\n        const date = new Date(element.date.toDate());\r\n        const dateString = formatDate(date);\r\n        if (datas[dateString]) {\r\n          if (!datas[dateString].includes('schedule')) {\r\n            datas[dateString].push('schedule');\r\n          }\r\n        } else {\r\n          datas[dateString] = ['schedule'];\r\n        }\r\n      });\r\n    }\r\n    for (const key in datas) {\r\n      if (datas.hasOwnProperty(key)) {\r\n        const element = document.querySelectorAll(`[data-date='${key}']`)[0];\r\n        element.innerHTML = '';\r\n        addMark(key, datas[key]);\r\n      }\r\n    }\r\n  };\r\n  React.useEffect(() => {\r\n    checkMonthEvent();\r\n  });\r\n  return (\r\n    <div>\r\n      <DayDialog\r\n        toggle={() => setShowDayDialog(!showDayDialog)}\r\n        open={showDayDialog}\r\n        date={clickedDate}\r\n        host={props.host}\r\n        mine={props.mine}\r\n      />\r\n      <FullCalendar\r\n        defaultView=\"dayGridMonth\"\r\n        plugins={[dayGridPlugin, interactionPlugin]}\r\n        aspectRatio=\"1.3\"\r\n        dateClick={clickDate}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nCalendar.propTypes = {\r\n  host: PropTypes.string.isRequired,\r\n  mine: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Calendar;\r\n","import React from 'react';\r\nimport MainLayout from '../components/MainLayout';\r\nimport Calendar from '../components/Calendar';\r\nimport {Row, Col} from 'reactstrap';\r\nimport './css/MyCalendar.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst MyCalendar = (props) => {\r\n  return (\r\n    <div className=\"h-100\">\r\n      {\r\n        props.user &&\r\n        <MainLayout user={props.user} title='내 캘린더' />\r\n      }\r\n      <div id=\"mycalendar-container\">\r\n        <Row noGutters className=\"h-100\">\r\n          <Col xl=\"3\" lg=\"3\" md=\"2\" sm=\"1\" xs=\"0\" />\r\n          <Col className=\"d-flex align-items-center\">\r\n            {\r\n              props.user &&\r\n              <Calendar user={props.user} host={props.user.uid} mine={true} />\r\n            }\r\n          </Col>\r\n          <Col xl=\"3\" lg=\"3\" md=\"2\" sm=\"1\" xs=\"0\" />\r\n        </Row>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nMyCalendar.propTypes = {\r\n  user: PropTypes.shape({\r\n    uid: PropTypes.string,\r\n    email: PropTypes.string,\r\n    displayName: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default MyCalendar;\r\n","import React from 'react';\r\nimport MainLayout from '../components/MainLayout';\r\nimport Calendar from '../components/Calendar';\r\nimport {\r\n  useParams,\r\n} from 'react-router-dom';\r\nimport firestoreHandler from '../firestoreHandler';\r\nimport {Row, Col} from 'reactstrap';\r\nimport './css/MyCalendar.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst FriendCalendar = (props) => {\r\n  const {uid} = useParams();\r\n  const [hostOfCalendar, setHostOfCalendar] = React.useState('');\r\n  const fetchHost = async () => {\r\n    const data = await firestoreHandler.getUser(uid);\r\n    setHostOfCalendar(data[0].name);\r\n  };\r\n  React.useEffect(() => {\r\n    fetchHost();\r\n  }, []);\r\n  return (\r\n    <div className=\"h-100\">\r\n      {\r\n        props.user &&\r\n        <MainLayout user={props.user} title={`${hostOfCalendar}님의 캘린더`} />\r\n      }\r\n      <div id=\"mycalendar-container\">\r\n        <Row noGutters className=\"h-100\">\r\n          <Col xl=\"3\" lg=\"3\" md=\"2\" sm=\"1\" xs=\"0\" />\r\n          <Col className=\"d-flex align-items-center\">\r\n            {\r\n              props.user &&\r\n              <Calendar user={props.user} host={uid} mine={false} />\r\n            }\r\n          </Col>\r\n          <Col xl=\"3\" lg=\"3\" md=\"2\" sm=\"1\" xs=\"0\" />\r\n        </Row>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nFriendCalendar.propTypes = {\r\n  user: PropTypes.shape({\r\n    uid: PropTypes.string,\r\n    email: PropTypes.string,\r\n    displayName: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default FriendCalendar;\r\n","import React, {useState} from 'react';\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n} from 'react-router-dom';\r\nimport firebase from './firebase';\r\nimport {createMuiTheme, ThemeProvider} from '@material-ui/core/styles';\r\nimport blueGrey from '@material-ui/core/colors/blueGrey';\r\nimport purple from '@material-ui/core/colors/purple';\r\n\r\nimport './custom.scss';\r\nimport './App.css';\r\n\r\nimport Home from './pages/Home';\r\nimport MyCalendar from './pages/MyCalendar';\r\nimport FriendCalendar from './pages/FriendCalendar';\r\n\r\nconst App = () => {\r\n  // const match = useRouteMatch();\r\n  const [user, setUser] = useState();\r\n  const theme = createMuiTheme({\r\n    palette: {\r\n      primary: blueGrey,\r\n      secondary: purple,\r\n    },\r\n    status: {\r\n      danger: 'orange',\r\n    },\r\n  });\r\n\r\n  firebase.auth().onAuthStateChanged((user) => {\r\n    if (user) {\r\n      setUser(user);\r\n    } else {\r\n      setUser();\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Router>\r\n      <ThemeProvider theme={theme}>\r\n        <div id=\"app\">\r\n          <Switch>\r\n            <Route path=\"/mycalendar\">\r\n              <MyCalendar user={user} />\r\n            </Route>\r\n            <Route path=\"/friendcalendar/:uid\">\r\n              <FriendCalendar user={user} />\r\n            </Route>\r\n            <Route path=\"/\">\r\n              <Home user={user} setUser={setUser} />\r\n            </Route>\r\n          </Switch>\r\n        </div>\r\n      </ThemeProvider>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}